<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="UTF-8">
    <title>欢迎页面</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="shortcut icon" type="image/x-icon" th:href="@{/favicon.ico}" />
    <link rel="stylesheet" th:href="@{/lib/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/animate.min.css}">
</head>

<body>
    <div class="z-body animated fadeIn" id="parentDiv">
        <blockquote class="layui-elem-quote">欢迎：
            <span><shiro:principal property="username"/></span>！当前时间: [[${#dates.format(new java.util.Date().getTime(), 'yyyy-MM-dd HH:mm:ss')}]]</blockquote>
        <fieldset class="layui-elem-field">
            <legend>待审核企业</legend>
            <div class="layui-field-box">
                <div class="layui-col-md12">
                    <div class="layui-card">
                        <div class="layui-card-body">
                            <div class="layui-carousel x-admin-carousel x-admin-backlog" lay-anim="" lay-indicator="inside" lay-arrow="none" style="width: 100%; height: 90px;">
                                <div carousel-item="">
                                    <ul class="layui-row layui-col-space10 layui-this">
                                        <li class="layui-col-xs2" th:each="nonAuthFactory:${nonAuthFactorys}">
                                            <a href="#" onclick="openTab('待审核企业', '/factoryAuth/index')" class="x-admin-backlog-body">
                                                <h3><span th:text="${nonAuthFactory.name}"></span></h3>
                                                <p>
                                                    <cite th:text="${nonAuthFactory.value}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="layui-elem-field">
            <legend>源数据统计</legend>
            <div class="layui-field-box">
                <div class="layui-col-md12">
                    <div class="layui-card">
                        <div class="layui-card-body">
                            <div class="layui-carousel x-admin-carousel x-admin-backlog" lay-anim="" lay-indicator="inside" lay-arrow="none" style="width: 100%; height: 200px;">
                                <div carousel-item="">
                                    <ul class="layui-row layui-col-space10 layui-this">
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('固体燃烧源', '/source/fixed/coal')" class="x-admin-backlog-body">
                                                <h3>固体燃烧源</h3>
                                                <p>
                                                    <cite th:text="${fixedSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('工艺过程源', '/source/process/shGas')" class="x-admin-backlog-body">
                                                <h3>工艺过程源</h3>
                                                <p>
                                                    <cite th:text="${processSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('溶剂使用源', '/source/solvent/dry')" class="x-admin-backlog-body">
                                                <h3>溶剂使用源</h3>
                                                <p>
                                                    <cite th:text="${solventSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('扬尘源', '/source/dust/soilDust')" class="x-admin-backlog-body">
                                                <h3>扬尘源</h3>
                                                <p>
                                                    <cite th:text="${dustSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('存储与运输源', '/source/transport/tank')" class="x-admin-backlog-body">
                                                <h3>存储与运输源</h3>
                                                <p>
                                                    <cite th:text="${transportSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('农牧源', 'source/farm/pesticide')" class="x-admin-backlog-body">
                                                <h3>农牧源</h3>
                                                <p>
                                                    <cite th:text="${farmSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('生物质燃烧源', 'source/biomass/bioBoiler')" class="x-admin-backlog-body">
                                                <h3>生物质燃烧源</h3>
                                                <p>
                                                    <cite th:text="${biomassSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('道路移动源', 'source/road/roadMove')" class="x-admin-backlog-body">
                                                <h3>道路移动源</h3>
                                                <p>
                                                    <cite th:text="${roadSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('非道路移动源', 'source/nonRoad/agriculture')" class="x-admin-backlog-body">
                                                <h3>非道路移动源</h3>
                                                <p>
                                                    <cite th:text="${nonRoadSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('其他源', 'source/repast/repast')" class="x-admin-backlog-body">
                                                <h3>其他源</h3>
                                                <p>
                                                    <cite th:text="${repastSourceNum}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="layui-elem-field">
            <legend>快捷键</legend>
            <div class="layui-field-box">
                <div class="layui-col-md12">
                    <div class="layui-card">
                        <div class="layui-card-body">
                            <div class="layui-carousel x-admin-carousel x-admin-backlog" lay-anim="" lay-indicator="inside" lay-arrow="none" style="width: 100%; height: 90px;">
                                <div carousel-item="">
                                    <ul class="layui-row layui-col-space10 layui-this">
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('地图', '/data/map')" class="x-admin-backlog-body">
                                                <h3>填报企业地理位置</h3>
                                                <p>
                                                    <img th:src="@{/images/map.gif}" alt="" style="height: 30px;width: 30px"/>
                                                </p>
                                            </a>
                                        </li>
                                        <shiro:hasRole name="admin">
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('角色管理', '/role/index')" class="x-admin-backlog-body">
                                                <h3>角色数</h3>
                                                <p>
                                                    <cite th:text="${roleCount}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('菜单管理', '/menu/index')" class="x-admin-backlog-body">
                                                <h3>菜单数</h3>
                                                <p>
                                                    <cite th:text="${menuCount}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('登录日志', '/log/login/index')" class="x-admin-backlog-body">
                                                <h3>登录日志</h3>
                                                <p>
                                                    <cite th:text="${loginLogCount}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('操作日志', '/log/sys/index')" class="x-admin-backlog-body">
                                                <h3>操作日志</h3>
                                                <p>
                                                    <cite th:text="${sysLogCount}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs2">
                                            <a href="#" onclick="openTab('在线人数', '/online/index')" class="x-admin-backlog-body">
                                                <h3>在线人数</h3>
                                                <p>
                                                    <cite th:text="${userOnlineCount}"></cite>
                                                </p>
                                            </a>
                                        </li>
                                        </shiro:hasRole>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="layui-elem-field">
            <legend>填报企业数据图表</legend>
            <div class="layui-field-box">
                <div class="layui-carousel" id="carousel_1" >
                    <div carousel-item="" >
                        <div id="barGraphDiv" style="height: 500px"></div>
                        <div id="pieDiv"style="height: 540px; "></div>
                    </div>
                </div>
            </div>
        </fieldset>

    </div>

    <script th:src="@{/lib/jquery/jquery.min.js}"></script>
    <script th:src="@{/lib/layui/layui.js}"></script>
    <script th:src="@{/js/common.js}"></script>
    <script th:src="@{/lib/echarts/dist/echarts.js}"></script>
    <script th:src="@{/js/myEcharts.js}"></script>
    <script type="application/javascript">
        layui.use(['carousel','element','jquery','form'], function() {
            var carousel = layui.carousel
            var $ = layui.jquery
                , element = layui.element //Tab的切换功能，切换事件监听等，需要依赖element模块
                ,form = layui.form //form表单
            // $(function(){
            //     element.progress('storage', '70%')
            //     $('#storage').css("background-color","red")
            // });
            carousel.render({
                elem: '#carousel_1'
                , arrow: 'hover'
                , width: '100%' //设置容器宽度
                , height: '500px'
                , indicator: 'none'
                , interval: 5000
            });
            var parentWith = $('#parentDiv').width();

            layui.$.get('/data/pie/factory/industryBig', function (result) {
                var legendData = result.legendData;
                var seriesData = result.seriesData;
                layui.$("#pieDiv").css("width", (parentWith - 35) + 'px');
                var myChartPie = echarts.init(document.getElementById('pieDiv'));
                initPie(myChartPie, "行业大分类企业占比", legendData, "行业大分类", seriesData);
            });

            layui.$.get('/data/barGrap/factory/industryBig', function (result) {
                var xAxisData = result.xAxisData;
                var seriesData = result.seriesData;
                layui.$("#barGraphDiv").css("width", (parentWith - 25) + 'px');
                var myChartBarGrap = echarts.init(document.getElementById('barGraphDiv'));
                inintBarGraph(myChartBarGrap,'行业大分类企业数量',['企业数量'], xAxisData, seriesData)
            });
        });
    </script>
</body>
</html>